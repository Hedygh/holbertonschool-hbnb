flowchart TB

%% ========= PRESENTATION LAYER =========
subgraph P["Presentation Layer"]
  direction TB
  API["API / Endpoints\n(Controllers / Routes)"]
  SVC["Services\n(Request handling)"]
  API --> SVC
end

%% ========= BUSINESS LOGIC LAYER =========
subgraph B["Business Logic Layer"]
  direction TB
  FACADE["HBnB Facade\n(Unified interface)"]
  MODELS["Domain Models\n(User, Place, Review, Amenity)\n+ Business Rules"]
  FACADE --> MODELS
end

%% ========= PERSISTENCE LAYER =========
subgraph D["Persistence Layer"]
  direction TB
  REPO["Repositories / Storage\n(Data access abstraction)"]
  DB["Database\n(Persistent storage)"]
  REPO --> DB
end

%% ========= LAYER COMMUNICATION (DEPENDENCIES) =========
SVC -->|Calls Facade| FACADE
MODELS -->|CRUD / Data operations| REPO


+---------------------------+
|     Presentation Layer    |
|  +---------------------+  |
|  | API / Endpoints     |  |
|  +---------------------+  |
|           |              |
|  +---------------------+  |
|  | Services            |  |
|  +---------------------+  |
+-----------|---------------+
            | Calls Facade
            v
+---------------------------+
|   Business Logic Layer    |
|  +---------------------+  |
|  | HBnB Facade         |  |
|  +---------------------+  |
|           |              |
|  +---------------------+  |
|  | Domain Models       |  |
|  | + Business Rules    |  |
|  +---------------------+  |
+-----------|---------------+
            | CRUD / Data operations
            v
+---------------------------+
|     Persistence Layer     |
|  +---------------------+  |
|  | Repositories/Storage|  |
|  +---------------------+  |
|           |              |
|  +---------------------+  |
|  | Database            |  |
|  +---------------------+  |
+---------------------------+

flowchart TB
→ diagramme en “Top to Bottom” (de haut en bas), parfait pour des couches.

subgraph P["Presentation Layer"] ... end
→ crée un grand bloc “Presentation Layer”.

API --> SVC
→ montre que l’API / endpoints utilisent des services (optionnel mais clair).

subgraph B["Business Logic Layer"] ...
→ bloc du métier (le cœur).

FACADE["HBnB Facade\n(Unified interface)"]
→ la Facade est explicitement nommée comme “interface unique”.

FACADE --> MODELS
→ la Facade orchestre la logique via les modèles/règles métier.

subgraph D["Persistence Layer"] ...
→ bloc stockage.

REPO --> DB
→ la persistence s’appuie sur la DB (même si la DB est “part 3”, on la montre conceptuellement).

SVC -->|Calls Facade| FACADE
→ point crucial : Presentation n’appelle pas les modèles directement, elle passe par la Facade.

MODELS -->|CRUD / Data operations| REPO
→ le métier utilise la persistence pour stocker/récupérer.